# 集群、分布式、微服务

## 集群

### 概念

集群就是同一个服务被部署在不同的服务器上，每台服务器能处理的任务是相同的。

![image-20220421152606134](https://raw.githubusercontent.com/Link3750/pictureRpository/main/pic/202301032049262.png)

### 优点

* 高可用性：即其中一台服务器坏掉了，但服务还是可以访问，不至于崩掉整个服务。如果高可用性集群中主节点发生了故障，则可以由次节点来代替主节点继续进行服务，次节点通常是主节点的镜像，当它代替主节点时，可以完全接管其身份，不会导致系统环境的变化。
* 伸缩性：是指系统适应不断增长的用户数的能力。提高这种并发会话的能力可以增加服务器的资源，也可以使用集群模式。
* 负载均衡：负载可以在计算机集群中尽可能平均地分摊处理客户发来的请求。该负载可能是需要均衡的应用程序处理负载或网络流量负载。这样的系统非常适合于运行同一组应用程序的大量用户。每个节点都可以处理一部分负载，并且可以在节点之间动态分配负载，以实现平衡。

## 分布式

### 概念

分布式则是将不同的服务部署在不同的服务器上。比如我们将fond商城的拆分成用户服务、商品服务、订单服务，这几个服务都分别部署在不同的服务器上，同时提供服务，构成我们整个商城，服务与服务之间互不影响。每个服务之间通过 API Gateway 来调用和访问

![image-20220421153456604](https://raw.githubusercontent.com/Link3750/pictureRpository/main/pic/202301032049391.png)

## 分布式和集群之间的关系

* 分布式是已缩短单个任务的执行时间来提高效率的，而集群是通过提高单位时间内执行的任务数量来提高效率的
* 分布式的每一个服务都可以看做一个节点，而每一个节点都可以做用来做集群，防止服务宕掉

## 微服务

### 概念

* 微服务是一种架构上的风格。多个服务部署在不同的服务器内，每个服务都是相互独立的，也就是说，每个服务都可以运行在自己的容器内。为了保证各个服务器之间的通信，则需要某种方法来实现，这种方法就叫做**服务治理**。服务治理用来管理各个服务之间的调用、熔断、降级、配置、路由、负载等等。微服务则是包括了服务治理和所有的服务——即：微服务 = 服务治理 + 各个服务。
* 微服务是通过RPC或者Restful API来进行服务之间通信的，这点和分布式不太一样。同时，微服务可以只部署在一台机器上，而分布式必须部署在不同机器上。

