# 重学java设计模式

## 第一节：工厂方法模式

### 介绍

1. ⼯⼚模式⼜称⼯⼚⽅法模式，是⼀种创建型设计模式，其在⽗类中提供⼀个创建对象的⽅法， 允许⼦类决定实例化对象的类型。
2. 主要意图是定义⼀个创建对象的接⼝，让其⼦类⾃⼰决定实例化哪⼀个⼯⼚类，⼯⼚模式使其创建过程延迟到⼦类进⾏。
3. 简单说就是为了提供代码结构的扩展性，屏蔽每⼀个功能类中的具体实现逻辑。
4. 需要实现的类⾮常多，如何去维护，怎样减低开发成本。这些都是工厂模式的缺点，需要在后续的设计模式结合使用中，逐步解决。

### 案例

在营销场景中经常会有某个⽤户做了⼀些操作；打卡、分享、留⾔、邀请注册等等，进⾏返利积分，最后通过积分在兑换商品，从⽽促活和拉新。

那么在这⾥我们模拟积分兑换中的发放多种类型商品，假如现在我们有如下三种类型的商品接⼝：

| 序号 |        类型        |                             接口                             |
| :--: | :----------------: | :----------------------------------------------------------: |
|  1   |       优惠券       | ` CouponResult sendCoupon(String uId, String couponNumber, String uuid)` |
|  2   |      实物商品      |            `Boolean deliverGoods(DeliverReq req)`            |
|  3   | 第三⽅爱奇艺兑换卡 |  `void grantToken(String bindMobileNumber, String cardId)`   |

**从以上接口可以看出如下信息：**

* 三个接⼝返回类型不同，有对象类型、布尔类型、还有⼀个空类型。
* ⼊参不同，发放优惠券需要仿᯿、兑换卡需要卡ID、实物商品需要发货位置(对象中含有)。
* 另外可能会随着后续的业务的发展，会新增其他种商品类型。因为你所有的开发需求都是随着业务对市场的拓展⽽带来的。

### 代码略

### 总结

1. 从上到下的优化来看，⼯⼚⽅法模式并不复杂，甚⾄这样的开发结构在你有所理解后，会发现更加简单了。

2. 那么这样的开发的好处知道后，也可以总结出来它的优点：

   1.  避免创建者与具体的产品逻辑耦合 ；

   2. 满⾜单⼀职责，每⼀个业务逻辑实现都在所属⾃⼰的类中完成；

   3. 满⾜开闭原则，⽆需更改使⽤调⽤⽅就可以在程序中引⼊新的产品类型 。

3. 但这样也会带来⼀些问题，⽐如有⾮常多的奖品类型，那么实现的⼦类会极速扩张。因此也需要使⽤其他的模式进⾏优化，这些在后续的设计模式中会逐步涉及到。